<footer class="site-footer">
    <div class="container">
        <div class="footer-content">
            <div class="copyright">
                <p>&copy; {{ site.time | date: '%Y' }} {{ site.title }}. All rights reserved.</p >
            </div>
            
            <div class="social-links">
                {% if site.github_username %}
                <a href=" " 
                   target="_blank" 
                   rel="noopener noreferrer"
                   aria-label="GitHub">
                    GitHub
                </a >
                {% endif %}
                
                {% if site.email %}
                <a href="mailto:{{ site.email }}" 
                   aria-label="Email">
                    è”ç³»æˆ‘
                </a >
                {% endif %}
            </div>
        </div>
    </div>
</footer>
<!-- åŸæœ‰footerå†…å®¹ä¿æŒä¸åŠ¨ -->
<footer>
    <p>&copy; {{ site.time | date: '%Y' }} {{ site.title }}</p >
</footer>

<!-- åœ¨footeråé¢æ·»åŠ éŸ³ä¹æ’­æ”¾å™¨ -->
<div class="music-player">
    <audio id="bg-music" loop preload="metadata">
        <!-- å»ºè®®çš„éŸ³ä¹æ–‡ä»¶è·¯å¾„ï¼Œæ‚¨éœ€è¦è‡ªå·±ä¸Šä¼ éŸ³ä¹ -->
        <source src="{{ '/assets/music/123.mp3' | relative_url }}" type="audio/mpeg">
        æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒéŸ³é¢‘æ’­æ”¾ã€‚
    </audio>
    
    <button id="music-toggle" class="music-btn" aria-label="åˆ‡æ¢èƒŒæ™¯éŸ³ä¹">
        <span class="music-icon">ğŸµ</span>
        <span class="music-text">æ’­æ”¾éŸ³ä¹</span>
    </button>
    
    <div class="volume-control">
        <input type="range" id="volume-slider" min="0" max="1" step="0.1" value="0.5" 
               aria-label="éŸ³é‡è°ƒèŠ‚">
        <span class="volume-icon">ğŸ”Š</span>
    </div>
</div>
<script>
// ä¿®å¤ç”µè„‘ç«¯æ— å£°éŸ³é—®é¢˜
document.addEventListener('DOMContentLoaded', function() {
    const audio = document.getElementById('bg-music');
    const toggleBtn = document.getElementById('music-toggle');
    const volumeSlider = document.getElementById('volume-slider');
    const musicIcon = toggleBtn.querySelector('.music-icon');
    const musicText = toggleBtn.querySelector('.music-text');
    
    let isPlaying = false;
    let audioActivated = false;
    
    // 1. å¼ºåˆ¶æ¿€æ´»éŸ³é¢‘ä¸Šä¸‹æ–‡ï¼ˆç”µè„‘ç«¯å…³é”®ä»£ç ï¼‰
    function activateAudioForDesktop() {
        // æ–¹æ³•1ï¼šåˆ›å»ºè™šæ‹ŸéŸ³é¢‘å¼ºåˆ¶æ¿€æ´»
        const silentAudio = new Audio();
        silentAudio.src = "data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAZGF0YQQAAAAAAA==";
        silentAudio.volume = 0;
        silentAudio.play().then(() => {
            silentAudio.pause();
            audioActivated = true;
            console.log('âœ… éŸ³é¢‘ä¸Šä¸‹æ–‡å¼ºåˆ¶æ¿€æ´»æˆåŠŸ');
        }).catch(e => {
            console.log('âŒ æ–¹æ³•1å¤±è´¥ï¼Œä½¿ç”¨æ–¹æ³•2');
            // æ–¹æ³•2ï¼šä½¿ç”¨Web Audio API
            try {
                const AudioContext = window.AudioContext || window.webkitAudioContext;
                const audioContext = new AudioContext();
                const oscillator = audioContext.createOscillator();
                oscillator.connect(audioContext.destination);
                oscillator.start();
                oscillator.stop(audioContext.currentTime + 0.001);
                audioActivated = true;
                console.log('âœ… Web Audio APIæ¿€æ´»æˆåŠŸ');
            } catch (err) {
                console.log('âŒ æ‰€æœ‰è‡ªåŠ¨æ¿€æ´»æ–¹æ³•å¤±è´¥ï¼Œéœ€è¦ç”¨æˆ·ç‚¹å‡»');
            }
        });
    }
    
    // 2. åˆå§‹åŒ–æ—¶å°è¯•æ¿€æ´»
    activateAudioForDesktop();
    
    // 3. ç”¨æˆ·ç‚¹å‡»é¡µé¢æ—¶å†æ¬¡æ¿€æ´»
    document.addEventListener('click', function() {
        if (!audioActivated) {
            audio.muted = true;
            audio.volume = 0;
            audio.play().then(() => {
                audio.pause();
                audio.muted = false;
                audio.volume = volumeSlider.value;
                audioActivated = true;
                musicText.textContent = 'æ’­æ”¾éŸ³ä¹';
                toggleBtn.style.opacity = '1';
                localStorage.setItem('audioActivated', 'true');
            });
        }
    }, { once: true });
    
    // 4. æ’­æ”¾/æš‚åœæŒ‰é’®ç‚¹å‡»
    toggleBtn.addEventListener('click', function(e) {
        if (!audioActivated) {
            e.preventDefault();
            alert('ğŸµ è¯·å…ˆç‚¹å‡»é¡µé¢ä»»æ„ä½ç½®æ¿€æ´»éŸ³é¢‘ï¼Œç„¶åå†æ¬¡ç‚¹å‡»æ’­æ”¾');
            return;
        }
        
        if (isPlaying) {
            audio.pause();
            musicIcon.textContent = 'ğŸµ';
            musicText.textContent = 'æ’­æ”¾éŸ³ä¹';
            toggleBtn.classList.remove('playing');
        } else {
            // ç”µè„‘ç«¯ç‰¹åˆ«å¤„ç†ï¼šå…ˆè®¾ç½®éŸ³é‡å†æ’­æ”¾
            audio.volume = volumeSlider.value;
            audio.play().then(() => {
                musicIcon.textContent = 'â¸ï¸';
                musicText.textContent = 'æš‚åœéŸ³ä¹';
                toggleBtn.classList.add('playing');
            }).catch(e => {
                console.log('æ’­æ”¾å¤±è´¥:', e);
                alert('æ’­æ”¾å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•');
            });
        }
        isPlaying = !isPlaying;
    });
    
    // 5. éŸ³é‡æ§åˆ¶
    volumeSlider.addEventListener('input', function() {
        audio.volume = this.value;
        localStorage.setItem('bgMusicVolume', this.value);
    });
    
    // 6. åŠ è½½ä¿å­˜çš„è®¾ç½®
    if (localStorage.getItem('audioActivated') === 'true') {
        audioActivated = true;
        musicText.textContent = 'æ’­æ”¾éŸ³ä¹';
        toggleBtn.style.opacity = '1';
    }
    
    const savedVolume = localStorage.getItem('bgMusicVolume');
    if (savedVolume) {
        audio.volume = savedVolume;
        volumeSlider.value = savedVolume;
    }
});
</script>
<style>
<!-- éŸ³ä¹æ’­æ”¾å™¨ - å¿«é€ŸåŠ è½½ç‰ˆ -->
<div class="music-player">
    <audio id="bg-music" loop preload="none">
        <source src="{{ '/assets/music/123.mp3' | relative_url }}" type="audio/mpeg">
    </audio>

    <button id="music-toggle" class="music-btn" aria-label="åˆ‡æ¢èƒŒæ™¯éŸ³ä¹">
        <span class="music-icon">ğŸµ</span>
        <span class="music-text">æ’­æ”¾éŸ³ä¹</span>
        <span class="loading-dots" style="display: none">...</span>
    </button>

    <div class="volume-control">
        <input type="range" id="volume-slider" min="0" max="1" step="0.1" value="0.5"
               aria-label="éŸ³é‡è°ƒèŠ‚">
        <span class="volume-icon">ğŸ”Š</span>
    </div>
</div>

<style>
/* æ–°çš„æ ·å¼ä»£ç  */
.music-player { ... }
/* åªä¿ç•™è¿™ä¸€ä¸ªæ ·å¼å— */
</style>

<script>
// æ–°çš„å¿«é€ŸåŠ è½½JavaScriptä»£ç 
// åªæœ‰è¿™ä¸€ä¸ªscriptæ ‡ç­¾
document.addEventListener('DOMContentLoaded', function() {
    // æ–°çš„ç®€æ´ä»£ç ...
});
</script>
<style>
.site-footer {
    background: #f8f9fa;
    border-top: 1px solid #e9ecef;
    padding: 2rem 0;
    margin-top: 3rem;
}

.footer-content {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 1rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.social-links {
    display: flex;
    gap: 1.5rem;
}

.social-links a {
    color: #666;
    text-decoration: none;
}

.social-links a:hover {
    color: #007bff;
}

@media (max-width: 768px) {
    .footer-content {
        flex-direction: column;
        gap: 1rem;
        text-align: center;
    }
}
</style>
